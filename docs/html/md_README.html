<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Servo Controller: Servo_Controller</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Servo Controller<span id="projectnumber">&#160;1.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Servo_Controller</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md10"></a></p>
<p>This is the documentation for the servo controller module. To explore the PCB that goes along with this code, go to the hardware folder of the github below. To learn how the project works go to the main README in the github. This README is just for the code and for how to configure it.</p>
<p>This code can only run on ESP32 chips that include RMT 2.0, this is ESP32S2, ESP32S3, and ESP32C3 as of this version. If you have a chip that supports the RMT 2.0 (with the sync manager) add your chip to idf_component.yml.</p>
<p><a href="https://github.com/ljohanon06/ServoControl32/">ServoControl Github</a></p>
<hr  />
<h1><a class="anchor" id="autotoc_md12"></a>
Coding</h1>
<p>This is how to code the servo_controller. To see the code documentation involving all the arguments and return values of the functions, please view the html documentation at the link below.</p>
<p><a href="https://ljohanon06.github.io/ServoControl32/servo__controller_8h.html">Servo_Controller Documentation</a></p>
<h2><a class="anchor" id="autotoc_md13"></a>
Config Struct</h2>
<p>When coding, first initialize the config struct as shown below, filling in your gpio numbers and servo precision. Gpio numbers must be capable of output and not be used for anything else. </p><div class="fragment"><div class="line"><a class="code hl_struct" href="structservo__controller__config__t.html">servo_controller_config_t</a> servo_cfg = {</div>
<div class="line">    .clk_gpio = GPIO_NUM_4,</div>
<div class="line">    .pulse_gpio = GPIO_NUM_5,</div>
<div class="line">    .servo1_gpio = GPIO_NUM_6,</div>
<div class="line">    .servo2_gpio = GPIO_NUM_7,</div>
<div class="line">    .serv_pres = <a class="code hl_enumvalue" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#ae83717368e7c47f4e6f870f3a5431e40a9cc0408a126c5f233855bc0598804c31">SERVO_PRECISION_500</a></div>
<div class="line">};</div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_ae83717368e7c47f4e6f870f3a5431e40a9cc0408a126c5f233855bc0598804c31"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#ae83717368e7c47f4e6f870f3a5431e40a9cc0408a126c5f233855bc0598804c31">SERVO_PRECISION_500</a></div><div class="ttdeci">@ SERVO_PRECISION_500</div><div class="ttdef"><b>Definition</b> servo_controller.h:21</div></div>
<div class="ttc" id="astructservo__controller__config__t_html"><div class="ttname"><a href="structservo__controller__config__t.html">servo_controller_config_t</a></div><div class="ttdoc">Servo controller config.</div><div class="ttdef"><b>Definition</b> servo_controller.h:27</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
Intialization and Starting</h2>
<p>Initialize the servo according to the code below, servo angles will be initialized to 0 degrees. After the servo controller is initialized, you must start the controller before the servos begin to move, you can set the servo angles while the servos aren't started. </p><div class="fragment"><div class="line"><a class="code hl_typedef" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a833a45042c89a9b84520028388d859f8">servo_controller_handle_t</a> handle = NULL;</div>
<div class="line"><a class="code hl_function" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#abfe085ca47df3df22790f79c211ae409">servo_initialize_controller</a>(&amp;servo_cfg, &amp;handle);</div>
<div class="line"><a class="code hl_function" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a6cf3490f7bb111cc6bb498ce6b3d9d7c">servo_start</a>(handle);</div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_a6cf3490f7bb111cc6bb498ce6b3d9d7c"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a6cf3490f7bb111cc6bb498ce6b3d9d7c">servo_start</a></div><div class="ttdeci">esp_err_t servo_start(servo_controller_handle_t handle)</div><div class="ttdoc">Start the servo controller.</div><div class="ttdef"><b>Definition</b> servo_controller.c:192</div></div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_a833a45042c89a9b84520028388d859f8"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a833a45042c89a9b84520028388d859f8">servo_controller_handle_t</a></div><div class="ttdeci">struct servo_controller_s * servo_controller_handle_t</div><div class="ttdef"><b>Definition</b> servo_controller.h:35</div></div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_abfe085ca47df3df22790f79c211ae409"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#abfe085ca47df3df22790f79c211ae409">servo_initialize_controller</a></div><div class="ttdeci">esp_err_t servo_initialize_controller(const servo_controller_config_t *servo_cfg, servo_controller_handle_t *ret_handle)</div><div class="ttdoc">Initializes the servo controller.</div><div class="ttdef"><b>Definition</b> servo_controller.c:65</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
Stopping and Deleting</h2>
<p>When finished using the servo controller, the controller can be stopped and then deleted. Please stop the controller before deleting it. Servos can be started again after being stopped, but while being stopped, the servos will not hold their position under load. </p><div class="fragment"><div class="line"><a class="code hl_function" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a32ce788b8858d2b28b7e2fc76d4d8b82">servo_stop</a>(handle);</div>
<div class="line"><a class="code hl_function" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a8db72d0e71542ac17ea94e88738cc6e6">servo_remove_controller</a>(handle);</div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_a32ce788b8858d2b28b7e2fc76d4d8b82"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a32ce788b8858d2b28b7e2fc76d4d8b82">servo_stop</a></div><div class="ttdeci">esp_err_t servo_stop(servo_controller_handle_t handle)</div><div class="ttdoc">Stop the servo controller.</div><div class="ttdef"><b>Definition</b> servo_controller.c:212</div></div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_a8db72d0e71542ac17ea94e88738cc6e6"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a8db72d0e71542ac17ea94e88738cc6e6">servo_remove_controller</a></div><div class="ttdeci">esp_err_t servo_remove_controller(servo_controller_handle_t handle)</div><div class="ttdoc">Remove the servo controller.</div><div class="ttdef"><b>Definition</b> servo_controller.c:223</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
Setting Servo Angles</h2>
<p>Servo angles can either be set individually or as a whole. Servo numbers are also 0-indexed, meaning the first servo is referred to as servo 0, and the last servo servo is referred to as servo 31. Servos can be set between 0 and 180 degrees. </p><div class="fragment"><div class="line"><a class="code hl_function" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a1c10c992dfd3191aac013195ee1c0c00">servo_set_all</a>(handle,90);</div>
<div class="line"><a class="code hl_function" href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a02809e5e51794ed3e8dd2504bdf87d39">servo_set_servo</a>(handle,31,180);</div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_a02809e5e51794ed3e8dd2504bdf87d39"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a02809e5e51794ed3e8dd2504bdf87d39">servo_set_servo</a></div><div class="ttdeci">esp_err_t servo_set_servo(servo_controller_handle_t handle, uint8_t servo_num, float servo_position)</div><div class="ttdoc">Set the angle of a single servo.</div><div class="ttdef"><b>Definition</b> servo_controller.c:241</div></div>
<div class="ttc" id="aexamples_2test_2components_2servo__controller_2include_2servo__controller_8h_html_a1c10c992dfd3191aac013195ee1c0c00"><div class="ttname"><a href="examples_2test_2components_2servo__controller_2include_2servo__controller_8h.html#a1c10c992dfd3191aac013195ee1c0c00">servo_set_all</a></div><div class="ttdeci">esp_err_t servo_set_all(servo_controller_handle_t handle, float servo_position)</div><div class="ttdoc">Set the angle of all 32 servos.</div><div class="ttdef"><b>Definition</b> servo_controller.c:251</div></div>
</div><!-- fragment --> <hr  />
<h1><a class="anchor" id="autotoc_md18"></a>
Importing</h1>
<p>In order to import this project to your ESP-IDF component, first create a components folder and drop the entire servo_controller folder in there. In your CMakeLists.txt for you main, add "REQUIRES servo_controller" and in a new line "set(EXTRA_COMPONENT_DIRS components)". Then in your main add "#include "servo_controller.h". Then you are free to use. Feel free to check out the CMakeLists.txt in the example. This component will soon be uploaded to the ESP-IDF component registry for easy use.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
License</h1>
<p>This project is licensed under the MIT License. <br  />
 Â© 2025 Levi Johanon. See the LICENSE file for details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
